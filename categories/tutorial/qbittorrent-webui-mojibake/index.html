<!DOCTYPE html>
<html data-theme="" lang="zh-CN">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="/css/main.css">
 
<meta name="generator" content="Hexo 7.3.0"></head>
    <!-- 响应式导航栏 -->
<div class="navbar bg-base-200 lg:hidden">
  <div class="navbar-start">
      <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar">
          <div class="w-10 rounded-full">
            <img alt="Tailwind CSS Navbar component" src="/images/icons/icon-152x152.png" />                    
          </div>
      </div>
  </div>
  <div class="navbar-center">
      <a href="/" class="btn btn-ghost text-xl">
          mykonakona&#39;s weblog
      </a>
  </div>
  <div class="navbar-end">
      <div class="dropdown dropdown-left">
      <div tabindex="0" role="button" class="btn btn-ghost btn-circle">
          <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          class="inline-block h-5 w-5 stroke-current">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
      </div>
      <ul tabindex="0" class="menu menu-lg dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow">
          
              <li>
                <a href="/">Home</a>
              </li>
          
              <li>
                <a href="/archives/">Archives</a>
              </li>
          
              <li>
                <a href="/categories/">Categories</a>
              </li>
          
              <li>
                <a href="/tags/">Tags</a>
              </li>
          
              <li>
                <a href="/about/">About</a>
              </li>
          
      </ul>
      </div>
  </div>
</div>
<!-- 响应式导航栏结束 -->
<body>
    <div class="drawer lg:drawer-open">
        <input id="my-drawer-3" type="checkbox" class="drawer-toggle" />
        <div class="drawer-side">
            <label for="my-drawer-3" aria-label="close sidebar" class="drawer-overlay"></label>
            <ul class="menu bg-base-300 text-base-content min-h-full w-80 p-8">
                <div class="flex flex-row items-center mx-auto">
                    <div class="avatar py-4">
                      <div class="w-24 rounded-full">
                        <img alt="Tailwind CSS Navbar component" src="/images/icons/icon-512x512.png" />     
                      </div>
                    </div>
                </div>     

                
                    <li class="hover:text-white transition duration-200 ease-in-out">
                      <a class="px-4 py-2 text-xl" href="/">Home</a>
                    </li>
                
                    <li class="hover:text-white transition duration-200 ease-in-out">
                      <a class="px-4 py-2 text-xl" href="/archives/">Archives</a>
                    </li>
                
                    <li class="hover:text-white transition duration-200 ease-in-out">
                      <a class="px-4 py-2 text-xl" href="/categories/">Categories</a>
                    </li>
                
                    <li class="hover:text-white transition duration-200 ease-in-out">
                      <a class="px-4 py-2 text-xl" href="/tags/">Tags</a>
                    </li>
                
                    <li class="hover:text-white transition duration-200 ease-in-out">
                      <a class="px-4 py-2 text-xl" href="/about/">About</a>
                    </li>
                
            </ul>
        </div>
        <div class="drawer-content bg-base-200 flex flex-col">          
        <!-- Page content here -->
        <!-- Page Content-->
        <main class="flex-1 min-h-[80vh] w-full p-4">
            
    <div class="mx-auto lg:p-4">
        <div class="card mx-auto lg:bg-base-100 max-w-5xl">
            <div class="card-title">    
            </div>
            <div class="card-body w-full mx-auto">
                <article class="prose max-w-4xl">
                    <div class="mb-4 text-3xl font-bold">
                            修复qBittorrent的WebUI乱码

                        </div>
                        <div class="text-base">
                            2022-11-14
                        </div>
                        <div class="text-base">
                            <p>qBittorrent的WebUI一直有个乱码问题。</p>
<span id="more"></span>

<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>这个问题在网络上由来已久，其中不少受害者是和我一样的群晖NAS用户。</p>
<p>根据<a target="_blank" rel="noopener" href="https://skyeysnow.com/forum.php?mod=viewthread&tid=366&extra=page=1">天雪的客户端支持列表</a>，我在群晖的docker安装了4.1.9版本的qBittorrent。这个版本的WebUI提供的功能很简陋，所以需要使用第三方WebUI替代。但修改WebUI路径并点击保存后，会跳转到一个<a target="_blank" rel="noopener" href="https://github.com/PrintNow/MD-qBittorrent-web-ui/issues/2">乱码</a>页面，此后无法正常进入qBittorrent的登陆页面。</p>
<h2 id="修复"><a href="#修复" class="headerlink" title="修复"></a>修复</h2><p>首先要把qBittorrent恢复到正常状态，一种方式是在url后加上如下内容以<a target="_blank" rel="noopener" href="https://www.reddit.com/r/qBittorrent/comments/ky01n4/web_ui_stuck_on_unacceptable_file_type_only/">调用api</a>：</p>
<p><code>/api/v2/app/setPreferences?json=%7B%22alternative_webui_enabled%22:false%7D</code></p>
<p>但经过实测，有些情况下这一方法是无效的，比如之前如果设置过语言为简体中文的话，报错信息为：</p>
<p><code>涓嶅彲鎺ュ彈鐨勬枃浠剁被鍨嬶紝鍙厑璁镐娇鐢ㄥ父瑙勬枃浠躲€�</code></p>
<p>而非:</p>
<p><code>&quot;Unacceptable file type, only regular file is allowed&quot;</code></p>
<p>所以最有效的方法还是直接修改qBittorrent的配置文件并重启。</p>
<p>在群晖等NAS中，可在docker管理界面-容器-详情-终端机-新增-通过命令启动，找到入口。随后输入<code>/bin/sh</code>开启终端。</p>
<p>之后在docker内部找到qBittorrent.conf，修改WebUI\AlternativeUIEnabled选项为false。</p>
<p>重启容器后重新正常访问qb的登陆页面。</p>
<h2 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h2><p>如果想要正常安装第三方WebUI并使用，一个重点是写对配置路径。</p>
<p>可以参考以下做法：</p>
<ol>
<li><p>若待挂载的各目录都安排在nas的绝对路径<code>/volume1/docker/qbittorrent/</code>下，这里<code>/docker</code>最好是一个有读写权限的共享文件夹，可以排除产生权限问题的可能；</p>
</li>
<li><p>新建容器时，除惯例挂载的config、data、downloads等文件夹外，新增一个挂载到<code>/docker/qbittorrent/webui</code>的<code>/webui</code>文件夹，用于存放UI文件并确保其可以被读取；</p>
</li>
<li><p>设置中文，在qb的配置菜单的备用WebUI选项填入docker内部的绝对路径，如：<code>/webui/qb-webui-linux-sc-sarasa/</code>，此时下一次目录为主题的private和public文件夹。</p>
</li>
</ol>
<p>这时点击保存，不再跳转乱码页面，第三方UI已可以正常显示。</p>
     
                        </div>             
                </article>
            </div>
        </div>
    </div>



             
        </main>
        <footer class="flex-none footer bg-base-200 text-base-content border-t border-base-300 px-10 py-4 min-h-12">
  <aside class="grid-flow-col items-center">
    <svg class="items-center" width="24" height="24" viewBox="0 0 1024 1024" fill="fill-current" xmlns="http://www.w3.org/2000/svg">
      <rect x="256" y="670.72" width="512" height="256" rx="128" fill="#1AD1A5"/>
      <circle cx="512" cy="353.28" r="256" fill="white"/>
      <circle cx="512" cy="353.28" r="261" stroke="black" stroke-opacity="0.2" stroke-width="10"/>
      <circle cx="512" cy="353.28" r="114.688" fill="#FF9903"/>
    </svg>
    <p>
      Copyright © 2024 - All right reserved
      <br />
      Powered by daisyUI
    </p>
  </aside>
  <nav class="md:place-self-center md:justify-self-end">
    <div class="grid grid-flow-col gap-4">
    </div>
  </nav>
</footer>
        <!-- Page Content结束-->
        </div>        
    </div>
</body>
</html>


