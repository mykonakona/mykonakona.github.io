<!DOCTYPE html><html class="has-navbar-fixed-top" lang="zh-CN"><head><meta name="description" content="什么是好的永久链接？如何在Hexo内实践？"><link rel="icon" href="/images/favicon.ico"><title>好的博客永久链接 - mykonakona</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5"><meta name="theme-color" content="#222f3e"><link rel="manifest" href="/manifest.json"><link rel="preload" href="https://webfonts-seven.vercel.app/noto-sans-sc-v36-chinese-simplified_latin-regular.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.1.2/styles/atom-one-dark.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bulma@0.6.2/css/bulma.min.css"><link rel="stylesheet" href="/css/style.css"><script src="//cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script><script src="//cdn.jsdelivr.net/npm/dayjs@1/plugin/relativeTime.min.js"></script><script src="//cdn.jsdelivr.net/npm/dayjs@1/locale/zh-cn.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script><script src="/js/script.js"></script><script>dayjs.extend(window.dayjs_plugin_relativeTime)</script><script>dayjs.locale("zh-cn")</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="mykonakona" type="application/atom+xml"></head><body><nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"><a class="navbar-item navbar-logo" href="/">mykonakona</a><div class="navbar-burger"><span></span> <span></span> <span></span></div></div><div class="navbar-menu navbar-start"><a class="navbar-item" href="/archives">归档</a> <a class="navbar-item" href="/tags">标签</a> <a class="navbar-item" href="/about">关于</a></div><div class="navbar-menu navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><style>svg{fill:#00dbab}</style><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/></svg> <i class="fa-solid fa-magnifying-glass"></i> </a><a class="navbar-item" title="RSS" href="https://mykonakona.github.io/atom.xml"><svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><style>svg{fill:#00dbab}</style><path d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg></a></div></div></nav><section class="section"><div class="container"><article class="article content gallery" itemscope itemprop="blogPost"><h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">好的博客永久链接</h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow"><time datetime="2023-09-10T13:20:14.000Z" itemprop="datePublished">9月 10 2023</time> </span><span class="column is-narrow article-category"><i class="far fa-folder"></i> <a class="article-category-link" href="/categories/tutorial/">教程</a> </span><span class="column is-narrow">8 分钟 读完 (约 1227 字)</span></div><div style="width:100%"></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><html><head></head><body><p>什么是好的永久链接？如何在Hexo内实践？</p><span id="more"></span><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>除了狭义上的配置、部署、主题美化等等，静态博客搭建还有一个重要的部分：SEO。</p><p>SEO是静态博客的一个痛点：</p><ol><li>当静态博客系统缺乏SEO支持时，有使用需求的用户就需要自行实现这类功能</li><li>流行的静态博客系统大多适配了一些配置选项乃至插件协助用户完成这项工作，但仍相对粗糙</li></ol><p>第二条在Hexo有所体现，以永久链接（permalink）的默认配置为例：</p><p><code>:year/:month/:day/:title/</code></p><p>很明显，这一配置将会生成一系列结构复杂的URL，并且修改博文的时间、标题后，URL也会同步变化——这对于搜索引擎已收纳的页面而言是一场<a target="_blank" rel="noopener" href="https://www.wbolt.com/seo-friendly-urls.html">灾难</a>。</p><p>据此，对静态博客进行永久链接配置是很有必要的。常见的URL问题大体包括：</p><ul><li>层级过深、长度过长</li><li>内容可读性差（不明意义的参数和ID、使用下划线、使用汉字等）</li><li>页面的频繁变动使URL失效</li></ul><h2 id="现状"><a href="#现状" class="headerlink" title="现状"></a>现状</h2><p>Hexo目前支持的永久链接插件主要有这几类：</p><ul><li>使用计数代替日期、标题等</li><li>直接对日期、标题等进行编码或hash</li><li>使用标题翻译、全拼插件自动转换标题为英文或全拼</li></ul><p>我们将前述总结的URL问题与目前的Hexo永久链接插件功能对照来看：</p><p>计数类、hash类的插件，能够有效缩短URL层级、长度。后续页面的标题、时间等内容的编辑与变动也不再影响URL本身。但这类URL显然不具备提示意义，读者看到的只是随机的字符串，也不利于记忆与查找。</p><p>翻译或全拼转换插件，方便了用户的使用，避免了URL中出现非ASCII字符。问题在于这类插件容易生成较长的URL，且翻译类插件的翻译质量也值得商榷。</p><h2 id="深入"><a href="#深入" class="headerlink" title="深入"></a>深入</h2><p>因此，不使用这类插件，直接配置为<code>:title/</code>或许也是一种选择：只要控制好标题的单词数量并通过连字符连接，很容易得到类似</p><p><code>https://www.demo.com/seo-friendly-urls/</code></p><p>符合谷歌<a target="_blank" rel="noopener" href="https://developers.google.com/search/docs/crawling-indexing/url-structure?hl=en&amp;visit_id=638300113981062992-3301496743&amp;rd=1">URL结构最佳实践</a>的URL。</p><p>到这里是不是就结束了呢？并没有。</p><p>直接配置为<code>:title/</code>，会导致public文件夹充斥着大量Hexo生成的页面文件。同时，source文件夹内的博文，将很难通过时间定位。这些问题似乎只能通过编写自定义<a target="_blank" rel="noopener" href="https://prinsss.github.io/hexo-posts-in-subfolder/">js脚本</a>的方式来调整。</p><h2 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h2><p>有没有可以不编程的解决方案呢？我是这样解决的：</p><ul><li>命令行运行：<code>hexo new page categories</code>，生成博客的“分类”（categories）页面</li><li>设置永久链接配置为<code>categories/:category/:origin_url/</code></li><li>设置category_map</li></ul><p>这样做有几个好处：</p><ul><li>通过配置中<code>categories/:category/</code>的部分，组织了public文件夹下的博文页面文件</li><li>单独访问categories/或categories/life/时不会404。<code>:year/:month/:day/:title/</code> 这类永久连接在<code>2023/</code>时是没有页面的。</li><li>source文件夹内的文件标题仍可以保持原样，不需要单独修改成类似<code>seo-friendly-urls.md</code>的形式。</li></ul><p>可参考我的Hexo配置：</p><figure class="highlight yaml hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># URL</span></span><br><span class="line"><span class="hljs-comment">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line"><span class="hljs-attr">url:</span> <span class="hljs-string">http://mykonakona.github.io</span></span><br><span class="line"><span class="hljs-attr">root:</span> <span class="hljs-string">/</span></span><br><span class="line"><span class="hljs-attr">permalink:</span> <span class="hljs-string">categories/:category/:origin_url/</span></span><br><span class="line"><span class="hljs-attr">permalink_defaults:</span></span><br><span class="line"><span class="hljs-attr">pretty_urls:</span></span><br><span class="line">  <span class="hljs-attr">trailing_index:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Set to false to remove trailing 'index.html' from permalinks</span></span><br><span class="line">  <span class="hljs-attr">trailing_html:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Set to false to remove trailing '.html' from permalinks</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># 其他内容……</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># Category &amp; Tag</span></span><br><span class="line"><span class="hljs-attr">default_category:</span> </span><br><span class="line"><span class="hljs-attr">category_map:</span></span><br><span class="line">  <span class="hljs-string">教程:</span> <span class="hljs-string">tutorial</span></span><br><span class="line">  <span class="hljs-string">分享:</span> <span class="hljs-string">experience</span></span><br><span class="line">  <span class="hljs-string">踩坑:</span> <span class="hljs-string">pitfall</span></span><br><span class="line">  <span class="hljs-string">生活:</span> <span class="hljs-string">life</span></span><br><span class="line">  <span class="hljs-string">笔记:</span> <span class="hljs-string">memo</span></span><br><span class="line"><span class="hljs-attr">tag_map:</span></span><br></pre></td></tr></tbody></table></figure><p><code>:origin_url/</code> 来自此前为博客的博文引入的Front Matter项，可参考<a href="https://mykonakona.github.io/categories/experience/my-notebook-workflow/">我的笔记工作流</a>。</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>有关URL还有一些其他观点，例如包含<code>.html</code>的URL被定性为<a target="_blank" rel="noopener" href="https://gohugo.io/content-management/urls/#ugly-urls">ugly URL</a>。然而包不包含<code>.html</code> 事实上并不影响搜索引擎的收录。因此上述所作的很多SEO努力实际上只是锦上添花的工作。比起为了SEO优化频繁修改URL结构，一个配置用到死或许反而效果更好。不过如果不希望后续再来调整博客URL，那么好好规划还是有必要的。</p></body></html></div><div class="columns is-variable is-1 is-multiline is-mobile"><span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/Hexo/">#Hexo</a></span> <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/SEO/">#SEO</a></span> <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/URL/">#URL</a></span></div><div class="columns is-mobile is-multiline article-nav"><span class="column is-12-mobile is-half-desktop is-hidden-mobile article-nav-prev"></span> <span class="column is-12-mobile is-half-desktop article-nav-next"><a href="/categories/tutorial/add-pwa-manually/">Hexo手动添加PWA</a></span></div></article></div></section><footer class="footer"><div class="container"><div class="columns content"><div class="column is-narrow has-text-centered">&copy; 2024 mykonakona &nbsp;</div><div class="column is-narrow has-text-centered"><a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0;margin-top:-3px" src="/images/by-nc-sa.svg" height="42px" width="120px"></a></div><div class="column is-hidden-mobile"></div></div></div></footer><div class="searchbox ins-search"><div class="searchbox-mask"></div><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input type="text" class="searchbox-input ins-search-input" placeholder="站内搜索"> <span class="searchbox-close ins-close ins-selectable"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><style>svg{fill:#00dbab}</style><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"/></svg></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(无标题)"},CONTENT_URL:"/content.json"}</script></body></html>