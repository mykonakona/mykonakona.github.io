<!DOCTYPE html>
<html data-theme="" lang="zh-CN">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="/css/main.css">
 
<meta name="generator" content="Hexo 7.3.0"></head>
    <!-- 响应式导航栏 -->
<div class="navbar bg-base-200 lg:hidden">
  <div class="navbar-start">
      <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar">
          <div class="w-10 rounded-full">
            <img alt="Tailwind CSS Navbar component" src="/images/icons/icon-152x152.png" />                    
          </div>
      </div>
  </div>
  <div class="navbar-center">
      <a href="/" class="btn btn-ghost text-xl">
          mykonakona&#39;s weblog
      </a>
  </div>
  <div class="navbar-end">
      <div class="dropdown dropdown-left">
      <div tabindex="0" role="button" class="btn btn-ghost btn-circle">
          <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          class="inline-block h-5 w-5 stroke-current">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
      </div>
      <ul tabindex="0" class="menu menu-lg dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow">
          
              <li>
                <a href="/">Home</a>
              </li>
          
              <li>
                <a href="/archives/">Archives</a>
              </li>
          
              <li>
                <a href="/categories/">Categories</a>
              </li>
          
              <li>
                <a href="/tags/">Tags</a>
              </li>
          
              <li>
                <a href="/about/">About</a>
              </li>
          
      </ul>
      </div>
  </div>
</div>
<!-- 响应式导航栏结束 -->
<body>
    <div class="drawer lg:drawer-open">
        <input id="my-drawer-3" type="checkbox" class="drawer-toggle" />
        <div class="drawer-side">
            <label for="my-drawer-3" aria-label="close sidebar" class="drawer-overlay"></label>
            <ul class="menu bg-base-300 text-base-content min-h-full w-80 p-4">
                <div class="flex flex-row items-center mx-auto">
                    <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar">
                        <div class="w-10 rounded-full">
                          <img alt="Tailwind CSS Navbar component" src="/images/icons/icon-512x512.png" />                                   
                        </div>
                    </div>
                </div>     
                
                    <li class="hover:text-white transition duration-200 ease-in-out">
                      <a class="px-4 py-2 text-xl" href="/">Home</a>
                    </li>
                
                    <li class="hover:text-white transition duration-200 ease-in-out">
                      <a class="px-4 py-2 text-xl" href="/archives/">Archives</a>
                    </li>
                
                    <li class="hover:text-white transition duration-200 ease-in-out">
                      <a class="px-4 py-2 text-xl" href="/categories/">Categories</a>
                    </li>
                
                    <li class="hover:text-white transition duration-200 ease-in-out">
                      <a class="px-4 py-2 text-xl" href="/tags/">Tags</a>
                    </li>
                
                    <li class="hover:text-white transition duration-200 ease-in-out">
                      <a class="px-4 py-2 text-xl" href="/about/">About</a>
                    </li>
                
            </ul>
        </div>
        <div class="drawer-content bg-base-200 flex flex-col">          
        <!-- Page content here -->
        <!-- Page Content-->
        <main class="flex-1 min-h-[80vh] w-full p-4">
            
    <div class="mx-auto px-4">
        <div class="card">
            <div class="card-title">    
            </div>
            <div class="card-body">
                <article class="mx-auto max-w-5xl prose ">
                    <div class="mb-4 text-3xl font-bold">
                            我搭静态博客

                        </div>
                        <div class="text-base">
                            2020-05-27
                        </div>
                        <div class="text-base">
                            <p>为什么选择静态博客？</p>
<span id="more"></span>

<p>事实上不久之前，我还试图搭建了最近比较火的halo。域名、证书签发、反代的配置等等都做好了。但经过一系列的折腾，最后还是回来重新使用github page。</p>
<p>做这个选择的理由是——动态博客真的贵：好的域名需要钱，线路流畅的VPS也需要钱。廉价VPS服务商的线路一言难尽，反复的折腾让专注于记录本身变得困难。因此权衡下来我决定采用更具性价比的静态博客方案。</p>
<p>话虽如此，并不代表静态博客就完美无缺。相反，一些在动态博客中根本不能称之为问题的问题，在静态博客上就得通过各种“奇技淫巧”来解决。</p>
<p>因此本文基于hexo聊一聊在搭建过程中需要注意的点，同类型的生成器如pelican在使用中基本上围绕的也都是这些问题。</p>
<h2 id="自动化部署"><a href="#自动化部署" class="headerlink" title="自动化部署"></a>自动化部署</h2><p>现在流行的做法通过Travis CI自动部署github page，基本上都遵循如下步骤：</p>
<ol>
<li>新建一个<code>username.github.io</code>仓库，在github的<code>Settings - Developer settings - Personal access tokens</code>页面内为Travis CI新建一个github page专用，并赋予repo权限的access token；</li>
<li>使用github账号登陆Travis CI以完成账号关联，将access token作为<code>GH_TOKEN</code>加入到从github同步过去的仓库配置中，并在Travis CI中启用该仓库。</li>
<li>在本地安装npm、hexo。初始化hexo项目后，为本地项目添加.travis.yml，并完成_config.yml、.gitignore等相关配置；</li>
<li>为<code>username.github.io</code>新建一个<code>source</code>分支，将本地项目推送到这个source分支下。最终目的是让Travis CI根据source分支下.travis.yml中的设置的步骤生成静态文件，并把静态文件推送到<code>username.github.io</code>的<code>master</code>分支下。</li>
</ol>
<p>这部分的教程其实相当多了，如<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000021987832" title="Travis CI 加 Hexo 实现自动构建部署 Github Pages 博客">1</a>。在实际搭建时，可以根据自己的情况进行调整，并不需要照搬教程。</p>
<h2 id="主题开发"><a href="#主题开发" class="headerlink" title="主题开发"></a>主题开发</h2><p>如果你使用了比较成熟的主题，但又希望做一些个性化的定制，比较好的一种方式是把这个主题fork到自己的github账号下。并在本地环境中拉取fork的主题。这样做之后，本地的开发环境将会有两个仓库：</p>
<ul>
<li><p><code>username.github.io</code>的<code>source</code>分支</p>
</li>
<li><p><code>hexo-theme-themename</code>的<code>master</code>分支</p>
</li>
</ul>
<p>由于主题是一个独立分支，因此在自动部署时，一般会把<code>source</code>下的themes文件夹加入到这个分支的<code>.gitignore</code>里去，避免发生一些可能的修改冲突。</p>
<p>使用时，则通过在.travis.yml添加<code>git clone</code>命令引入主题并渲染，例如：</p>
<pre><code class="bash">before_script:
  - npm install -g hexo-cli 
  - mkdir themes
  - git clone https://github.com/username/hexo-theme-themename.git themes/themename

script: 
  - hexo generate
</code></pre>
<h2 id="评论服务选型"><a href="#评论服务选型" class="headerlink" title="评论服务选型"></a>评论服务选型</h2><p>对动态博客来说几乎属于标配的评论功能，在静态博客上就得通过各种奇奇怪怪的方案去实现，并且往往还并不完美。我目前使用的主题minos支持的几种评论服务，就各自存在一些缺点：</p>
<h3 id="disqus"><a href="#disqus" class="headerlink" title="disqus"></a>disqus</h3><p>国内网络环境下的访问实在是太慢了，非常影响浏览体验。</p>
<ul>
<li><p>一种方式是把disqus隐藏在一个按钮中，相当于用户只有在点击该评论按钮后才会加载disqus，属于一个治标不治本的方案。</p>
</li>
<li><p>如果坚持使用disqus，可以考虑参考<a target="_blank" rel="noopener" href="https://blog.skk.moe/post/prevent-disqus-from-slowing-your-site/#Disqus-Lazyload" title="使 Disqus 不再拖累性能和页面加载">2</a>，但我个人感觉还是会有拖慢。</p>
</li>
</ul>
<h3 id="gitment-gitalk"><a href="#gitment-gitalk" class="headerlink" title="gitment&#x2F;gitalk"></a>gitment&#x2F;gitalk</h3><p>单独为这类评论服务建一个存放issue仓库倒还不是最麻烦的地方，最麻烦的是每篇博文好像都得手动加issue，虽然github也有网友写了脚本完成这一工作，但易用性还是大大降低了。</p>
<p>另外gitment已经停止更新，一些常见问题如<a target="_blank" rel="noopener" href="https://github.com/imsun/gitment/issues/100" title="总是提示 [object XMLHttpRequestProgressEvent] #100">object XMLHttpRequestProgressEvent</a>、<a target="_blank" rel="noopener" href="https://github.com/imsun/gitment/issues/178" title="hexo博客的gitment评论开启一直失败">hexo上的开启失败</a>等只能通过网友提供的各种方案加以解决，这一点也十分劝退我。</p>
<h3 id="isso"><a href="#isso" class="headerlink" title="isso"></a>isso</h3><p>使用体验最好的一个，但并没有选用它。这实际上涉及的是一个理念问题：isso需要自行搭建，也就是说又得放在VPS上，那为什么不直接选用一个自带评论的动态博客方案呢，和我搭静态博客的出发点相矛盾。当然，对于不介意这点的朋友，这个服务还是推荐的。</p>
<h3 id="valine"><a href="#valine" class="headerlink" title="valine"></a>valine</h3><p>目前这个博客上部署的方案，没有上面一些比较恶心的问题。但leancloud这个服务能坚持多久是比较让我担心的地方……</p>
<p>综上所述，可以看到静态博客的评论实在是一大痛点。虽然有各种各样的解决方案，但始终只能算马马虎虎能用，难以达到动态博客的使用体验。</p>
<h2 id="搜索引擎收录及SEO优化"><a href="#搜索引擎收录及SEO优化" class="headerlink" title="搜索引擎收录及SEO优化"></a>搜索引擎收录及SEO优化</h2><p>目前google的网址前缀收录的推荐方式是通过校验html来完成，步骤可参考<a target="_blank" rel="noopener" href="https://kennyliblog.nctu.me/2019/06/24/Google-search-Hexo-Blog/" title="實作 - 讓 Google 能搜尋到自己的 Hexo Blog">5</a>，SEO优化方面的文章也很多，如<a target="_blank" rel="noopener" href="https://juejin.im/post/5ae7fc18518825672565a7f0#heading-4" title="Hexo 个人博客 SEO 优化（3）：改造你的博客，提升搜索引擎排名">6</a>，这里就不再赘述了。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>完成这些内容后，你的静态博客相当于拥有了基本的功能。后续包括<a target="_blank" rel="noopener" href="https://dengcb.com/zh/hexo-minos-multi-language/" title="用Minos搭建Hexo全站多语言站点">全站多语言支持</a>、<a target="_blank" rel="noopener" href="https://blog.skk.moe/post/img-lazyload-hexo/" title="图片 lazyload 的学问和在 Hexo 上的最佳实践">图片懒加载</a>等等，都是可以持续优化的方面。</p>
<p>当然，对于一个博客来说，最重要的永远是内容。希望大家不要被各种花俏的技巧蒙蔽了双眼，为了搭博客而搭博客。而是通过搭博客培养兴趣和动手能力，在兴趣驱动下，继续分享自己的思考与创意😁</p>
     
                        </div>             
                </article>
            </div>
        </div>
    </div>



             
        </main>
        <footer class="flex-none footer bg-base-200 text-base-content border-t border-base-300 px-10 py-4 min-h-12">
  <aside class="grid-flow-col items-center">
    <svg class="items-center" width="24" height="24" viewBox="0 0 1024 1024" fill="fill-current" xmlns="http://www.w3.org/2000/svg">
      <rect x="256" y="670.72" width="512" height="256" rx="128" fill="#1AD1A5"/>
      <circle cx="512" cy="353.28" r="256" fill="white"/>
      <circle cx="512" cy="353.28" r="261" stroke="black" stroke-opacity="0.2" stroke-width="10"/>
      <circle cx="512" cy="353.28" r="114.688" fill="#FF9903"/>
    </svg>
    <p>
      Copyright © 2024 - All right reserved
      <br />
      Powered by daisyUI
    </p>
  </aside>
  <nav class="md:place-self-center md:justify-self-end">
    <div class="grid grid-flow-col gap-4">
    </div>
  </nav>
</footer>
        <!-- Page Content结束-->
        </div>        
    </div>
</body>
</html>


